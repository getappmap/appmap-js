META client: {"name":"appmap-node","version":"2.23.0","url":"https://github.com/getappmap/appmap-node"}
META language: {"name":"javascript","engine":"Node.js","version":"v23.9.0"}
META app: appmap-js
META recorder: {"type":"tests","name":"jest"}
META name: record.prompt.obtainTestCommands when commands are guessed and not confirmed prompts for test command and env
META source_location: packages/cli/tests/unit/record/prompt/obtainTestCommands.spec.ts
META test_status: succeeded

CLASS package: src
  CLASS package: cmds
    CLASS package: record
      CLASS package: prompt
        CLASS obtainTestCommands
          FUNC obtainTestCommands (packages/cli/src/cmds/record/prompt/obtainTestCommands.ts:7) static
      CLASS configuration
        FUNC findOption (packages/cli/src/cmds/record/configuration.ts:148) static
        FUNC mergeConfigData (packages/cli/src/cmds/record/configuration.ts:165) static
      CLASS TestCommand
        FUNC toString (packages/cli/src/cmds/record/configuration.ts:17) static
      CLASS Configuration
        FUNC write (packages/cli/src/cmds/record/configuration.ts:52)
        FUNC configOption (packages/cli/src/cmds/record/configuration.ts:66)
        FUNC setConfigOption (packages/cli/src/cmds/record/configuration.ts:73)
      CLASS TestCaseRecording
        FUNC envString (packages/cli/src/cmds/record/testCaseRecording.ts:136) static
    CLASS UserInteraction
      FUNC progress (packages/cli/src/cmds/userInteraction.ts:45)
CLASS package: tests
  CLASS package: unit
    CLASS package: record
      CLASS package: prompt
        CLASS obtainTestCommands.spec
          FUNC promptForTestCommandAndEnv (packages/cli/tests/unit/record/prompt/obtainTestCommands.spec.ts:28) static

EVENT CALL id:1 thread:0 obtainTestCommands/spec.promptForTestCommandAndEnv
EVENT CALL id:2 thread:0 obtainTestCommands.obtainTestCommands(undefined: RecordContext {
  configuration: TempConfig {
    configDirty: false,
    settingsDirty: false,
    appMapFile: '/tmp/tmp-1386793-6x80ehs34TED',
    settingsFile: '/tmp/tmp-1386793-hi8ayHwsB7Jb',
    config: {},
    settings: {}
  },
  appMapDir: '.',
  initialAppMapCount: 37
})
EVENT CALL id:3 thread:0 UserInteraction.progress(msg: '') receiver: UserInteraction {
  spinner: Ora {
    options: [Object],
    frameIndex: 0,
    _spinner: [Object],
    interval: 80,
    color: 'cyan',
    hideCursor: true,
    stream: [WriteStream],
    id: undefined,
    _isEnabled: true,
    _isSilent: false,
    lineCount: 1,
    linesToClear: 0,
    _indent: 0,
    discardStdin: true,
    isDiscardingStdin: false,
    [Symbol(text)]: '',
    [Symbol(prefixText)]: undefined
  }
}
EVENT RETURN id:4 parent:3 elapsed:0.000007280032150447369
EVENT CALL id:5 thread:0 UserInteraction.progress(msg: "In order to record test cases, you need to provide a command that I can use to run the tests. If your project has many test cases, enter a command that will run integration, functional, system or request tests, as opposed to unit tests. Don't worry about how long the tests will take to run, you will specify a maximum runtime in an upcoming step.") receiver: UserInteraction {
  spinner: Ora {
    options: [Object],
    frameIndex: 0,
    _spinner: [Object],
    interval: 80,
    color: 'cyan',
    hideCursor: true,
    stream: [WriteStream],
    id: undefined,
    _isEnabled: true,
    _isSilent: false,
    lineCount: 1,
    linesToClear: 0,
    _indent: 0,
    discardStdin: true,
    isDiscardingStdin: false,
    [Symbol(text)]: '',
    [Symbol(prefixText)]: undefined
  }
}
EVENT RETURN id:6 parent:5 elapsed:0.000012387987226247787
EVENT CALL id:7 thread:0 UserInteraction.progress(msg: '') receiver: UserInteraction {
  spinner: Ora {
    options: [Object],
    frameIndex: 0,
    _spinner: [Object],
    interval: 80,
    color: 'cyan',
    hideCursor: true,
    stream: [WriteStream],
    id: undefined,
    _isEnabled: true,
    _isSilent: false,
    lineCount: 1,
    linesToClear: 0,
    _indent: 0,
    discardStdin: true,
    isDiscardingStdin: false,
    [Symbol(text)]: '',
    [Symbol(prefixText)]: undefined
  }
}
EVENT RETURN id:8 parent:7 elapsed:0.0000019330764189362526
EVENT RETURN id:9 parent:2 elapsed:0.004258908098563552 return: Promise { undefined }
EVENT RETURN id:10 parent:1 elapsed:0.006085747969336808 return: Promise { undefined }
EVENT CALL id:11 thread:0 UserInteraction.progress(msg: "Here's a suggested test command for your project:") receiver: UserInteraction {
  spinner: Ora {
    options: [Object],
    frameIndex: 0,
    _spinner: [Object],
    interval: 80,
    color: 'cyan',
    hideCursor: true,
    stream: [WriteStream],
    id: undefined,
    _isEnabled: true,
    _isSilent: false,
    lineCount: 1,
    linesToClear: 0,
    _indent: 0,
    discardStdin: true,
    isDiscardingStdin: false,
    [Symbol(text)]: '',
    [Symbol(prefixText)]: undefined
  }
}
EVENT RETURN id:12 parent:11 elapsed:0.000003522029146552086
EVENT CALL id:13 thread:0 UserInteraction.progress(msg: '') receiver: UserInteraction {
  spinner: Ora {
    options: [Object],
    frameIndex: 0,
    _spinner: [Object],
    interval: 80,
    color: 'cyan',
    hideCursor: true,
    stream: [WriteStream],
    id: undefined,
    _isEnabled: true,
    _isSilent: false,
    lineCount: 1,
    linesToClear: 0,
    _indent: 0,
    discardStdin: true,
    isDiscardingStdin: false,
    [Symbol(text)]: '',
    [Symbol(prefixText)]: undefined
  }
}
EVENT RETURN id:14 parent:13 elapsed:0.0000024460023269057274
EVENT CALL id:15 thread:0 TestCommand.toString(cmd: { env: {}, command: 'bundle exec rspec' }) receiver: [class TestCommand]
EVENT CALL id:16 thread:0 TestCaseRecording.envString(env: {}) receiver: [class TestCaseRecording]
EVENT RETURN id:17 parent:16 elapsed:0.000007022055797278881 return: ''
EVENT RETURN id:18 parent:15 elapsed:0.00016743503510951996 return: 'bundle exec rspec'
EVENT CALL id:19 thread:0 UserInteraction.progress(msg: 'bundle exec rspec') receiver: UserInteraction {
  spinner: Ora {
    options: [Object],
    frameIndex: 0,
    _spinner: [Object],
    interval: 80,
    color: 'cyan',
    hideCursor: true,
    stream: [WriteStream],
    id: undefined,
    _isEnabled: true,
    _isSilent: false,
    lineCount: 1,
    linesToClear: 0,
    _indent: 0,
    discardStdin: true,
    isDiscardingStdin: false,
    [Symbol(text)]: '',
    [Symbol(prefixText)]: undefined
  }
}
EVENT RETURN id:20 parent:19 elapsed:0.0000022569438442587852
EVENT CALL id:21 thread:0 UserInteraction.progress(msg: '') receiver: UserInteraction {
  spinner: Ora {
    options: [Object],
    frameIndex: 0,
    _spinner: [Object],
    interval: 80,
    color: 'cyan',
    hideCursor: true,
    stream: [WriteStream],
    id: undefined,
    _isEnabled: true,
    _isSilent: false,
    lineCount: 1,
    linesToClear: 0,
    _indent: 0,
    discardStdin: true,
    isDiscardingStdin: false,
    [Symbol(text)]: '',
    [Symbol(prefixText)]: undefined
  }
}
EVENT RETURN id:22 parent:21 elapsed:0.0000020760344341397285
EVENT CALL id:23 thread:0 UserInteraction.progress(msg: 'To run the tests, I will run the following command:') receiver: UserInteraction {
  spinner: Ora {
    options: [Object],
    frameIndex: 0,
    _spinner: [Object],
    interval: 80,
    color: 'cyan',
    hideCursor: true,
    stream: [WriteStream],
    id: undefined,
    _isEnabled: true,
    _isSilent: false,
    lineCount: 1,
    linesToClear: 0,
    _indent: 0,
    discardStdin: true,
    isDiscardingStdin: false,
    [Symbol(text)]: '',
    [Symbol(prefixText)]: undefined
  }
}
EVENT RETURN id:24 parent:23 elapsed:0.000003029010258615017
EVENT CALL id:25 thread:0 UserInteraction.progress(msg: '') receiver: UserInteraction {
  spinner: Ora {
    options: [Object],
    frameIndex: 0,
    _spinner: [Object],
    interval: 80,
    color: 'cyan',
    hideCursor: true,
    stream: [WriteStream],
    id: undefined,
    _isEnabled: true,
    _isSilent: false,
    lineCount: 1,
    linesToClear: 0,
    _indent: 0,
    discardStdin: true,
    isDiscardingStdin: false,
    [Symbol(text)]: '',
    [Symbol(prefixText)]: undefined
  }
}
EVENT RETURN id:26 parent:25 elapsed:0.000004768022336065769
EVENT CALL id:27 thread:0 TestCaseRecording.envString(env: {}) receiver: [class TestCaseRecording]
EVENT RETURN id:28 parent:27 elapsed:0.0000063749030232429504 return: ''
EVENT CALL id:29 thread:0 UserInteraction.progress(msg: 'bundle exec rspec') receiver: UserInteraction {
  spinner: Ora {
    options: [Object],
    frameIndex: 0,
    _spinner: [Object],
    interval: 80,
    color: 'cyan',
    hideCursor: true,
    stream: [WriteStream],
    id: undefined,
    _isEnabled: true,
    _isSilent: false,
    lineCount: 1,
    linesToClear: 0,
    _indent: 0,
    discardStdin: true,
    isDiscardingStdin: false,
    [Symbol(text)]: '',
    [Symbol(prefixText)]: undefined
  }
}
EVENT RETURN id:30 parent:29 elapsed:0.0000021080486476421356
EVENT CALL id:31 thread:0 UserInteraction.progress(msg: '') receiver: UserInteraction {
  spinner: Ora {
    options: [Object],
    frameIndex: 0,
    _spinner: [Object],
    interval: 80,
    color: 'cyan',
    hideCursor: true,
    stream: [WriteStream],
    id: undefined,
    _isEnabled: true,
    _isSilent: false,
    lineCount: 1,
    linesToClear: 0,
    _indent: 0,
    discardStdin: true,
    isDiscardingStdin: false,
    [Symbol(text)]: '',
    [Symbol(prefixText)]: undefined
  }
}
EVENT RETURN id:32 parent:31 elapsed:0.000001769978553056717
EVENT CALL id:33 thread:0 Configuration.setConfigOption(path: 'test_recording.test_commands', value: [ { env: {}, command: 'bundle exec rspec' } ]) receiver: TempConfig {
  configDirty: false,
  settingsDirty: false,
  appMapFile: '/tmp/tmp-1386793-6x80ehs34TED',
  settingsFile: '/tmp/tmp-1386793-hi8ayHwsB7Jb',
  config: {},
  settings: {}
}
EVENT CALL id:34 thread:0 configuration.mergeConfigData(data: {}, path: 'test_recording.test_commands', value: [ { env: {}, command: 'bundle exec rspec' } ])
EVENT RETURN id:35 parent:34 elapsed:0.0000203070230782032
EVENT RETURN id:36 parent:33 elapsed:0.00015172699932008982
EVENT CALL id:37 thread:0 Configuration.write receiver: TempConfig {
  configDirty: true,
  settingsDirty: false,
  appMapFile: '/tmp/tmp-1386793-6x80ehs34TED',
  settingsFile: '/tmp/tmp-1386793-hi8ayHwsB7Jb',
  config: { test_recording: [Object] },
  settings: {}
}
EVENT RETURN id:38 parent:37 elapsed:0.00044461607467383146 return: Promise { undefined }
EVENT CALL id:39 thread:0 Configuration.configOption(path: 'test_recording.test_commands', defaultValue: '') receiver: TempConfig {
  configDirty: false,
  settingsDirty: false,
  appMapFile: '/tmp/tmp-1386793-6x80ehs34TED',
  settingsFile: '/tmp/tmp-1386793-hi8ayHwsB7Jb',
  config: { test_recording: [Object] },
  settings: {}
}
EVENT CALL id:40 thread:0 configuration.findOption(data: { test_recording: { test_commands: [Array] } }, path: 'test_recording.test_commands', defaultValue: '')
EVENT RETURN id:41 parent:40 elapsed:0.000006468035280704498 return: [ { env: {}, command: 'bundle exec rspec' } ]
EVENT RETURN id:42 parent:39 elapsed:0.00014115904923528433 return: [ { env: {}, command: 'bundle exec rspec' } ]